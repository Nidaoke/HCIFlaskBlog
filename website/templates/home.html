<!--uses the base template-->
{%extends "base.html"%}
{% block title %}Home{% endblock %}
{% block content %}

<h1 align="center">Posts</h1>

<!-- Display posts -->
<div id="posts">

{% for post in posts %}
    <div class="card border-dark">

        <!-- Post card -->
        <div class="card-header d-flex justify-content-between align-items-center">

            <!-- Post user -->
            <a href="/posts/{{post.user.username}}"> <!-- Clicking user takes us to their page -->
                {{post.user.username}}
            </a>

            {% if user.id == post.author %} <!-- Only view options if author -->
            <!-- Post buttons -->
            <div class="btn-group">
                <!-- Dropdown button -->
                <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown"></button>
                <!-- Dropdown items -->
                <ul class="dropdown-menu">
                    <!-- Delete item -->
                    <li> <a href="/delete-post/{{post.id}}" class="dropdown-item"> Delete </a> </li>
                </ul>
            </div>
            {% endif %}

        </div>

        <!-- Post text -->
        <div class="card-body">
            <div class="card-text">
                {{post.text}}
            </div>
        </div>

        <!-- Post date-->
        <div class="card-footer text-muted">
            {{post.date_created}}
        </div>
    </div>

    <br />
{% endfor %}

<!-- Create Post button -->
<div align="center">
    <a href="/create-post">
        <button type="button" class="btn btn-primary btn-lg"> Create Post </button>
    </a>
</div>

</div>

{% endblock %}
